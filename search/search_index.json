{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"ancientt","text":"<p>A tool to automate network testing tools, like iperf3, in dynamic environments such as Kubernetes and more to come dynamic environments.</p>"},{"location":"#features","title":"Features","text":"<p>TL;DR A network test tool, like <code>iperf3</code> can be run in, e.g., Kubernetes, cluster from all-to-all Nodes.</p> <ul> <li>Run network tests with the following projects:</li> <li><code>iperf3</code></li> <li>Soon other tools will be available as well, like <code>smokeping</code>.</li> <li>Tests can be run through the following \"runners\":</li> <li>Ansible (an inventory file is needed)</li> <li>Kubernetes (a kubeconfig connected to a cluster)</li> <li>Results of the network tests can be output in different formats:</li> <li>CSV</li> <li>Dump (uses <code>pp.Sprint()</code> (GitHub k0kubun/pp, dump pretty print library))</li> <li>Excel files (Excelize)</li> <li>go-chart Charts (WIP)</li> <li>MySQL</li> <li>SQLite</li> </ul>"},{"location":"#usage","title":"Usage","text":"<p>Either build (<code>go get</code>) or download the Ancientt executable.</p> <p>A config file containing test definitions must be given by flag <code>--testdefinition</code> (or short flag <code>-c</code>) or named <code>testdefinition.yaml</code> in the current directory.</p> <p>Below command will try loading <code>your-testdefinitions.yaml</code> as the test definitions config:</p> <pre><code># You can also use the short flag `-c\nancientt --testdefinition your-testdefinitions.yaml\n</code></pre>"},{"location":"#demos","title":"Demos","text":"<p>See Demos.</p>"},{"location":"#goals-of-this-project","title":"Goals of this Project","text":"<ul> <li>A bit like Prometheus blackbox exporter which contains \"definitions\" for probes. The \"tests\" would be pluggable through a Golang interface.</li> <li>\"Runner\" interface, e.g., for Kubernetes, Ansible, etc. The \"runner\" abstracts the \"how it is run\", e.g., for Kubernetes creates a Job, Ansible (download and) trigger a playbook to run the test.</li> <li>Store result data in different formats, e.g., CSV, excel, MySQL</li> <li>Up for discussion: graph database (Dgraph) and / or TSDB support</li> <li>\"Visualization\" for humans, e.g., possibility to automatically draw \"shiny\" graphs from the results.</li> </ul>"},{"location":"#development","title":"Development","text":"<p>Golang version: <code>v1.15</code> or higher (tested with <code>v1.15.2</code> on <code>linux/amd64</code>)</p>"},{"location":"#dependencies","title":"Dependencies","text":"<p><code>go mod</code> is used to manage the depeendencies.</p>"},{"location":"#building","title":"Building","text":"<p>Quickest way to just get ancientt built is to run the following command:</p> <pre><code>go get -u github.com/galexrt/ancientt/cmd/ancientt\n</code></pre>"},{"location":"#licensing","title":"Licensing","text":"<p>Ancientt is licensed under the Apache 2.0 License.</p>"},{"location":"config-examples/","title":"Config Examples","text":"<p>This page contains some example configurations.</p> <p>Be sure to also checkout the Demos page for examples with example <code>ancientt</code> output, config and a snippet or whole file of the output results.</p>"},{"location":"config-examples/#kubernetes-iperf3-csv-output-iperf3-test-between-all-to-all-nodes","title":"Kubernetes + IPerf3 = CSV Output: IPerf3 test between all to all Nodes","text":"<pre><code>version: '0'\nrunner:\n  #name: mock\n  name: kubernetes\n  kubernetes:\n    # Assuming you are in your home directory\n    kubeconfig: .kube/config\n    image: quay.io/galexrt/container-toolbox:v20231109-123917-402\n    namespace: ancientt\n    timeouts:\n      deleteTimeout: 20\n      runningTimeout: 60\n      succeedTimeout: 60\n    hosts:\n      ignoreSchedulingDisabled: true\n      tolerations: []\ntests:\n- name: iperf3-one-rand-to-one-rand\n  type: iperf3\n  transformations:\n  - source: \"bits_per_second\"\n    destination: \"gigabits_per_second\"\n    action: \"add\"\n    modifier: 100000000\n    modifierAction: \"division\"\n  outputs:\n  - name: csv\n    csv:\n      filePath: .\n      namePattern: 'ancientt-{{ .TestStartTime }}-{{ .Data.Tester }}.csv'\n      # If you want one CSV per server and client host test run, you can use the following:\n      #namePattern: 'ancientt-{{ .TestStartTime }}-{{ .Data.Tester }}-{{ .Data.ServerHost }}_{{ .Data.ClientHost }}.csv'\n  runOptions:\n    continueOnError: true\n    # If you wanna do the test(s) more than once in one go, set to higher than 1\n    rounds: 1\n    # Wait 10 seconds between each round\n    interval: 10s\n    mode: \"sequential\"\n    parallelcount: 1\n  # This hosts section would cause iperf3 to be run from all hosts to the hosts selected in the `destinations` section\n  # Each entry will be merged into one list\n  hosts:\n    clients:\n    - name: all-hosts\n      all: true\n    servers:\n    - name: all-hosts\n      all: true\n  iperf3:\n    udp: false\n    duration: 10\n    interval: 1\n    additionalFlags:\n      clients: []\n      server: []\n</code></pre>"},{"location":"config-structure/","title":"Config Structure","text":"<p>This Document documents the types introduced by Ancientt for configuration to be used by users.</p> <p>NOTE: This document is generated from code comments. When contributing a change to this document please do so by changing the code comments.</p>"},{"location":"config-structure/#table-of-contents","title":"Table of Contents","text":"<ul> <li>AdditionalFlags</li> <li>AnsibleGroups</li> <li>AnsibleTimeouts</li> <li>CSV</li> <li>Config</li> <li>Dump</li> <li>Excelize</li> <li>FilePath</li> <li>GoChart</li> <li>GoChartGraph</li> <li>Hosts</li> <li>IPerf3</li> <li>KubernetesHosts</li> <li>KubernetesServiceAccounts</li> <li>KubernetesTimeouts</li> <li>MySQL</li> <li>Output</li> <li>PingParsing</li> <li>RunOptions</li> <li>Runner</li> <li>RunnerAnsible</li> <li>RunnerKubernetes</li> <li>RunnerMock</li> <li>SQLite</li> <li>Test</li> <li>TestHosts</li> <li>Transformation</li> </ul>"},{"location":"config-structure/#additionalflags","title":"AdditionalFlags","text":"<p>AdditionalFlags additional flags structure for Server and Clients</p> Field Description Scheme Required Validation clients List of additional flags for clients []string false server List of additional flags for server []string false <p>Back to TOC</p>"},{"location":"config-structure/#ansiblegroups","title":"AnsibleGroups","text":"<p>AnsibleGroups server and clients host group names in the used inventory file(s)</p> Field Description Scheme Required Validation server Server inventory server group name string true clients Clients inventory clients group name string true <p>Back to TOC</p>"},{"location":"config-structure/#ansibletimeouts","title":"AnsibleTimeouts","text":"<p>AnsibleTimeouts timeouts for Ansible command runs</p> Field Description Scheme Required Validation commandTimeout Timeout duration for <code>ansible</code> and <code>ansible-inventory</code> calls (NOT task command timeouts; default: <code>20s</code>) time.Duration false taskCommandTimeout Timeout duration for <code>ansible</code> Task command calls (default: <code>45s</code>) time.Duration false <p>Back to TOC</p>"},{"location":"config-structure/#csv","title":"CSV","text":"<p>CSV CSV Output config options</p> Field Description Scheme Required Validation separator Separator which rune to use as a separator in the CSV file (default: <code>;</code>). *rune true <p>Back to TOC</p>"},{"location":"config-structure/#config","title":"Config","text":"<p>Config Config object for the config file</p> Field Description Scheme Required Validation version Version right now is just <code>0</code>, so we can keep track of config structure versioning. string true runner Runner Runner configuration to use. Runner true tests Tests List of <code>Test</code>s to run. []*Test true required,min=1 <p>Back to TOC</p>"},{"location":"config-structure/#dump","title":"Dump","text":"<p>Dump Dump Output config options</p> Field Description Scheme Required Validation <p>Back to TOC</p>"},{"location":"config-structure/#excelize","title":"Excelize","text":"<p>Excelize Excelize Output config options. TODO implement</p> Field Description Scheme Required Validation saveAfterRows After what amount of rows the Excel file should be saved (default: <code>1</code>) int false required,min=1 <p>Back to TOC</p>"},{"location":"config-structure/#filepath","title":"FilePath","text":"<p>FilePath file path and name pattern for outputs file generation</p> Field Description Scheme Required Validation filePath File base path for output string true required,min=1 namePattern File name pattern templated from various availables during output generation string true required,min=1 <p>Back to TOC</p>"},{"location":"config-structure/#gochart","title":"GoChart","text":"<p>GoChart GoChart Output config options</p> Field Description Scheme Required Validation graphs Graphs definitions of graphs to produce from the testers output data []*GoChartGraph true required,min=1 <p>Back to TOC</p>"},{"location":"config-structure/#gochartgraph","title":"GoChartGraph","text":"<p>GoChartGraph Type and columns for a one or two Y-axis chart (+ X-axis) to be generated based on this information.</p> Field Description Scheme Required Validation timeColumn TimeColumn column with the time / interval to use for the X-axis string true required leftY LeftY name of the column / data column to use for the the left Y axis string false rightY RightY name of the column / data column to use for the the right Y axis string true required withLinearRegression WithLinearRegression if a linear regression series should be added to each data series (default: <code>false</code>). *bool false withSimpleMovingAverage WithSimpleMovingAverage if a simple moving average should be added to each data series(default: <code>false</code>). *bool false <p>Back to TOC</p>"},{"location":"config-structure/#hosts","title":"Hosts","text":"<p>Hosts options for hosts selection for a Test</p> Field Description Scheme Required Validation name Name of this hosts selection. string true all If all hosts available should be used (default: <code>false</code>). *bool false random Select <code>Count</code> Random hosts from the available hosts list (default: <code>false</code>). *bool false count Must be used with <code>Random</code>, will cause <code>Count</code> times Nodes to be randomly selected from all applicable hosts. int true hosts Static list of hosts (this list is not checked for accuracy) []string true hostSelector \\\"Label\\\" selector for the dynamically generated hosts list, e.g., Kubernetes label selector map[string]string true antiAffinity AntiAffinity not implemented yet []string false <p>Back to TOC</p>"},{"location":"config-structure/#iperf3","title":"IPerf3","text":"<p>IPerf3 IPerf3 config structure for testers.Tester config</p> Field Description Scheme Required Validation additionalFlags Additional flags for client and server AdditionalFlags false duration Duration Time in seconds the IPerf3 test should transmit / receive (default: <code>10</code>). In case of the Ansible Runner, you need to increase the Ansible runners <code>timeouts.taskCommandTimeout</code> option when increasing the Duration. The Ansible Runner <code>timeouts.taskCommandTimeout</code> option should be set to <code>Duration + some extra time</code> (e.g., 10 seconds). *int false required,min=1 interval Interval Interval in seconds which IPerf3 will print / return periodic throughput reports (default: <code>1</code>). *int false required,min=1 udp If UDP should be used for the IPerf3 test *bool false <p>Back to TOC</p>"},{"location":"config-structure/#kuberneteshosts","title":"KubernetesHosts","text":"<p>KubernetesHosts hosts selection options for Kubernetes</p> Field Description Scheme Required Validation ignoreSchedulingDisabled If Nodes that are <code>SchedulingDisabled</code> should be ignored (default: <code>true</code>) *bool false tolerations List of Kubernetes corev1.Toleration to tolerate when selecting Nodes []corev1.Toleration false <p>Back to TOC</p>"},{"location":"config-structure/#kubernetesserviceaccounts","title":"KubernetesServiceAccounts","text":"<p>KubernetesServiceAccounts server and client ServiceAccount name to use for the created Pods</p> Field Description Scheme Required Validation server Server ServiceAccount name to use for server Pods string false clients Clients ServiceAccount name to use for client Pods string false <p>Back to TOC</p>"},{"location":"config-structure/#kubernetestimeouts","title":"KubernetesTimeouts","text":"<p>KubernetesTimeouts timeouts for operations with the Kubernetess API (in secconds)</p> Field Description Scheme Required Validation deleteTimeout Timeout for object deletion in seconds (default: <code>20</code>) int false runningTimeout Timeout for \\\"Pod running\\\" check in seconds (default: <code>60</code>) int false succeedTimeout Timeout for \\\"Pod succeded\\\" check in seconds (e.g., client Pod exits after Pod; default: <code>60</code>) int false <p>Back to TOC</p>"},{"location":"config-structure/#mysql","title":"MySQL","text":"<p>MySQL MySQL Output config options</p> Field Description Scheme Required Validation dsn MySQL DSN, format <code>[username[:password]@][protocol[(address)]]/dbname[?param1=value1&amp;...&amp;paramN=valueN]</code>, for more information see GitHub go-sql-driver/mysql - DSN (Data Source Name) string true tableNamePattern Pattern used for templating the name of the table used in the MySQL database, the tables are created automatically when MySQL.AutoCreateTables is set to <code>true</code> string true autoCreateTables Automatically create tables in the MySQL database (default: <code>true</code>) *bool false <p>Back to TOC</p>"},{"location":"config-structure/#output","title":"Output","text":"<p>Output Output config structure pointing to the other config options for each output</p> Field Description Scheme Required Validation name Name of this output string true required,min=3 csv CSV output options *CSV true goChart GoChart output options *GoChart true dump Dump output options *Dump true excelize Excelize output options *Excelize true sqlite SQLite output options *SQLite true mysql MySQL output options *MySQL true transformations Transformations transformations to be applied to the output data for the chosen output []*Transformation false <p>Back to TOC</p>"},{"location":"config-structure/#pingparsing","title":"PingParsing","text":"<p>PingParsing PingParsing config structure for testers.Tester config</p> Field Description Scheme Required Validation count Count How many pings should be sent (default: <code>10</code>) *int true required,min=1 deadline Deadline Quote from pingparsing help output: \\\"Timeout before ping exits. valid time units are: d/day/days, h/hour/hours, m/min/mins/minute/minutes, s/sec/secs/second/seconds, ms/msec/msecs/millisecond/milliseconds, us/usec/usecs/microsecond/microseconds. if no unit string found, considered seconds as the time unit. see also ping(8) [-w deadline] option description. note: meaning of the 'deadline' may differ system to system.\\\" (default: <code>15s</code>) *time.Duration false timeout Timeout Quote from the pingparsing help output: \\\"Time to wait for a response per packet. Valid time units are: d/day/days, h/hour/hours, m/min/mins/minute/minutes, s/sec/secs/second/seconds, ms/msec/msecs/millisecond/milliseconds, us/usec/usecs/microsecond/microseconds. if no unit string found, considered milliseconds as the time unit. Attempt to send packets with milliseconds granularity in default. If the system does not support timeout in milliseconds, round up as seconds. Use system default if not specified. This option will be ignored if the system does not support timeout itself. See also ping(8) [-W timeout] option description. note: meaning of the 'timeout' may differ system to system.\\\" (default: <code>10s</code>) *time.Duration false interface Interface network interface to use for sending the pings. string false <p>Back to TOC</p>"},{"location":"config-structure/#runoptions","title":"RunOptions","text":"<p>RunOptions options for running the tasks</p> Field Description Scheme Required Validation continueOnError Continue on error during test runs (recommended to set to <code>true</code>) (default: is <code>true</code>) *bool false rounds Amount of test rounds (repetitions) to do for a test plan (default: <code>1</code>) int false interval Time interval to sleep / wait between (default: <code>10s</code>) time.Duration false mode Run mode can be <code>parallel</code> or <code>sequential</code> (see <code>RunMode</code>, default: is <code>sequential</code>) RunMode false parallelCount NOT IMPLEMENTED YET amount of test tasks to run when using <code>RunModeParallel</code> (value: <code>parallel</code>). int false <p>Back to TOC</p>"},{"location":"config-structure/#runner","title":"Runner","text":"<p>Runner structure with all available runners config options</p> Field Description Scheme Required Validation name Name of the runner string true kubernetes Kubernetes runner options *RunnerKubernetes true ansible Ansible runner options *RunnerAnsible true mock Mock runner options (userd for testing purposes) *RunnerMock true <p>Back to TOC</p>"},{"location":"config-structure/#runneransible","title":"RunnerAnsible","text":"<p>RunnerAnsible Ansible Runner config options</p> Field Description Scheme Required Validation inventoryFilePath InventoryFilePath Path to inventory file to use string true groups Groups server and clients group names *AnsibleGroups true ansibleCommand Path to the ansible command (if empty will be searched for in <code>PATH</code>; default: <code>ansble</code>) string false ansibleInventoryCommand Path to the ansible-inventory command (if empty will be searched for in <code>PATH</code>; default: <code>ansble-inventory</code>) string false timeouts Timeout settings for ansible command runs *AnsibleTimeouts false commandRetries CommandRetries amount of tries before to fail waiting for the server (main) task to start (default: <code>10</code>) *int false parallelHostFactCalls ParallelHostFactCalls the amount of host facts calls to make in parallel (default: <code>7</code>) *int false <p>Back to TOC</p>"},{"location":"config-structure/#runnerkubernetes","title":"RunnerKubernetes","text":"<p>RunnerKubernetes Kubernetes Runner config options</p> Field Description Scheme Required Validation inClusterConfig If the Kubernetes client should use the in-cluster config for the cluster communication bool true kubeconfig Path to your kubeconfig file, if not set the following order will be tried out, <code>KUBECONFIG</code> and <code>$HOME/.kube/config</code> string false image The image used for the spawned Pods for the tests (default: <code>quay.io/galexrt/container-toolbox:v20231109-123917-402</code>) string false namespace Namespace to execute the tests in string true max=63 hostNetwork If <code>hostNetwork</code> mode should be used for the test Pods *bool false timeouts Timeout settings for operations against the Kubernetes API *KubernetesTimeouts false annotations Annotations to put on the test Pods map[string]string false hosts Host selection specific options *KubernetesHosts false serviceaccounts ServiceAccounst to use server and client Pods *KubernetesServiceAccounts false <p>Back to TOC</p>"},{"location":"config-structure/#runnermock","title":"RunnerMock","text":"<p>RunnerMock Mock Runner config options (here for good measure)</p> Field Description Scheme Required Validation <p>Back to TOC</p>"},{"location":"config-structure/#sqlite","title":"SQLite","text":"<p>SQLite SQLite Output config options</p> Field Description Scheme Required Validation tableNamePattern Pattern used for templating the name of the table used in the SQLite database, the tables are created automatically string true <p>Back to TOC</p>"},{"location":"config-structure/#test","title":"Test","text":"<p>Test Config options for each Test</p> Field Description Scheme Required Validation name Test name string true type The tester to use, e.g., for <code>iperf3</code> set to <code>iperf3</code> and so on string true runOptions Options for the execution of the test RunOptions false outputs List of Outputs to use for processing data from the testers. []Output true required,min=1 transformations Transformations transformations to be applied to Output data []*Transformation false hosts Hosts selection for client and server TestHosts true iperf3 IPerf3 tester options *IPerf3 true pingParsing PingParsing tester options *PingParsing true <p>Back to TOC</p>"},{"location":"config-structure/#testhosts","title":"TestHosts","text":"<p>TestHosts list of clients and servers hosts for use in the test(s)</p> Field Description Scheme Required Validation clients Static list of hosts to use as clients []Hosts true required,min=1 servers Static list of hosts to use as server []Hosts true required,min=1 <p>Back to TOC</p>"},{"location":"config-structure/#transformation","title":"Transformation","text":"<p>Transformation data transformation instructions</p> Field Description Scheme Required Validation key Source name of the (data) column to use for the transformation string true required action Action transformation action to use on the Source key TransformationAction true required,min=3 from Destination used for the \\\"replace\\\" TransformationAction for targetting the key to overwrite string false modifier Modifier value to use in combination with the ModifierAction to modify the values (e.g., settin git to <code>1000</code> and ModifierAction to <code>divison</code> will divise the value by 1000) *float64 false modifierAction ModifierAction action to run on the values together with the Modifier ModifierAction true <p>Back to TOC</p>"},{"location":"demos/","title":"Demos","text":"<p>This page contains demos of <code>ancientt</code> in action.</p> <p>Each demo has an asciinema recording, the used <code>testdefinition.yaml</code> and depending on the used output format a short snippet or the whole output available.</p>"},{"location":"demos/#kubernetes-iperf3-one-random-node-to-all-kubernetes-nodes","title":"Kubernetes: <code>iperf3</code> One Random Node to All Kubernetes Nodes","text":"<p><code>testdefinition.yaml</code>: <pre><code>version: '0'\nrunner:\n  name: kubernetes\n  kubernetes:\n    kubeconfig: .kube/config\n    image: quay.io/galexrt/container-toolbox:v20231109-123917-402\n    hosts:\n      ignoreSchedulingDisabled: true\ntests:\n- name: iperf3-one-to-all\n  type: iperf3\n  outputs:\n  - name: csv\n    csv:\n      filePath: ./results\n      namePattern: 'ancientt-{{ .TestStartTime }}-{{ .Data.Tester }}.csv'\n  runOptions:\n    continueOnError: true\n    rounds: 1\n  hosts:\n    clients:\n    - name: all-hosts\n      all: true\n    servers:\n    - name: one-host\n      count: 1\n      random: true\n  iperf3:\n    additionalFlags:\n      clients: [\"--interval=1\"]\n      server: [\"--interval=1\"]\n</code></pre></p> <p>Output `csv (partial snippet): <pre><code>test_time,round,tester,server_host,client_host,socket,start,end,seconds,bytes,bits_per_second,retransmits,snd_cwnd,rtt,rttvar,pmtu,omitted,iperf3_version,system_info,additional_info\n2019-09-24T20:43:13+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-01,5,0.000000,1.000295,1.000295,1982632968,15856387318.277708,0,3191392,308,384,1500,false,iperf 3.6,Linux ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267\n2019-09-24T20:43:13+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-01,5,1.000295,2.000191,0.999896,2487746560,19904041515.077232,0,3191392,246,310,1500,false,iperf 3.6,Linux ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267\n2019-09-24T20:43:13+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-01,5,2.000191,3.000123,0.999932,2199388160,17596300936.243999,0,3191392,761,622,1500,false,iperf 3.6,Linux ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267\n2019-09-24T20:43:13+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-01,5,3.000123,4.000487,1.000364,2596536320,20764735793.626110,0,3191392,262,322,1500,false,iperf 3.6,Linux ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-b411d4627abf6b743515539a060f8a84292e2267\n[...]\n2019-09-24T20:43:29+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-02,5,0.000000,1.000507,1.000507,176868460,1414230500.636069,819,1107216,5421,1645,1450,false,iperf 3.6,Linux ancientt-client-iperf3-6ca1e56296767da8d29adf6c8bba8ba6fc32fce4 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-6ca1e56296767da8d29adf6c8bba8ba6fc32fce4\n[...]\n2019-09-24T20:43:43+0200,0,iperf3,mycoolk8scluster-worker-01,mycoolk8scluster-worker-03,5,9.000335,10.000137,0.999802,192675840,1541711805.372557,289,1077858,3027,325,1450,false,iperf 3.6,Linux ancientt-client-iperf3-af06030e7b7611f917582390fb1db0e38e799c08 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64,ancientt-client-iperf3-af06030e7b7611f917582390fb1db0e38e799c08\n</code></pre></p>"},{"location":"demos/#more-demos-to-come-soon","title":"More demos to come soon","text":"<p>There will soon be more demos, about the different runners, testers and outputs available in <code>ancientt</code>.</p>"},{"location":"kubernetes/","title":"Kubernetes","text":""},{"location":"kubernetes/#rbac","title":"RBAC","text":"<pre><code>apiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: ancientt\nrules:\n  # To create the `ancientt` namespace\n  - apiGroups: [\"\"]\n    resources: [\"namespaces\"]\n    verbs:\n      - get\n      - create\n  # To get/list, create and delete test runner pods\n  - apiGroups: [\"\"]\n    resources: [\"pods\"]\n    verbs:\n      - get\n      - list\n      - create\n      - delete\n  # Selecting the nodes\n  - apiGroups: [\"\"]\n    resources: [\"nodes\"]\n    verbs:\n      - get\n      - list\n</code></pre>"},{"location":"outputs/sql-based/","title":"SQL-based","text":"<p>For SQL based outputs (e.g., <code>mysql</code>, <code>sqlite</code>) these are example queries for (the queries assume that the table name with the results is named <code>iperf3results</code>). Be sure to specify <code>iperf3results</code> as the table name in the SQL based output's config.</p> <p>NOTE</p> <p>Using <code>mysql</code> output will by default autogenerate the tables necessary, unless the <code>autoCreateTables</code> has been set to `false.</p> <p>`sqlite  output will always create the tables when they don't exist.</p>"},{"location":"outputs/sql-based/#create-table","title":"<code>CREATE TABLE</code>","text":"<p>NOTE This is only necessary if you, e.g., want to import existing CSV results.</p> <pre><code>CREATE TABLE `iperf3results` (\n    `test_time` varchar(100) COLLATE utf8_bin DEFAULT NULL,\n    `round` int(11) DEFAULT NULL,\n    `tester` varchar(100) COLLATE utf8_bin DEFAULT NULL,\n    `server_host` varchar(100) COLLATE utf8_bin DEFAULT NULL,\n    `client_host` varchar(100) COLLATE utf8_bin DEFAULT NULL,\n    `socket` int(11) DEFAULT NULL,\n    `start` float DEFAULT NULL,\n    `end` float DEFAULT NULL,\n    `seconds` float DEFAULT NULL,\n    `bytes` bigint(20) DEFAULT NULL,\n    `bits_per_second` float DEFAULT NULL,\n    `retransmits` bigint(20) DEFAULT NULL,\n    `snd_cwnd` bigint(20) DEFAULT NULL,\n    `rtt` bigint(20) DEFAULT NULL,\n    `rttvar` bigint(20) DEFAULT NULL,\n    `pmtu` int(11) DEFAULT NULL,\n    `omitted` tinyint(1) DEFAULT NULL,\n    `iperf3_version` varchar(100) COLLATE utf8_bin DEFAULT NULL,\n    `system_info` varchar(300) COLLATE utf8_bin DEFAULT NULL,\n    `additional_info` varchar(255) COLLATE utf8_bin DEFAULT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=' ';\n</code></pre>"},{"location":"outputs/sql-based/#select-queries","title":"<code>SELECT</code> Queries","text":""},{"location":"outputs/sql-based/#averaged-gbps-grouped-by-round-server_host-and-client_host","title":"Averaged Gbps grouped by <code>round</code>, <code>server_host</code> and <code>client_host</code>","text":"<pre><code>SELECT\n    test_time,\n    server_host,\n    client_host,\n    AVG(bits_per_second) AS bits_per_second_avg,\n    AVG(bits_per_second / 1000000000) AS gbps_avg,\n    AVG(rtt) AS rtt_avg,\n    SUM(retransmits) AS total_retransmits\nFROM\n    `iperf3results`\nWHERE\n    server_host != client_host\nGROUP BY\n    round,\n    server_host,\n    client_host\nORDER BY\n    gbps_avg DESC;\n</code></pre>"}]}